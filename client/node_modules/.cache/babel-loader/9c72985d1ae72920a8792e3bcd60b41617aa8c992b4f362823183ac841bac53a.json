{"ast":null,"code":"// import { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n// import { faCircleXmark } from \"@fortawesome/free-solid-svg-icons\";\n// import \"./reserve.css\";\n// import useFetch from \"../../hooks/useFetch\";\n// import { useContext, useState } from \"react\";\n// import { SearchContext } from \"../../context/SearchContext\";\n// import axios from \"axios\";\n// import { useNavigate } from \"react-router-dom\";\n\n// const Reserve = ({ setOpen, spaceId }) => {\n//   const [selectedTables, setSelectedTables] = useState([]);\n//   const { data, loading, error } = useFetch(`/spaces/table/${spaceId}`);\n//   const { dates } = useContext(SearchContext);\n\n//   const getDatesInRange = (startDate, endDate) => {\n//     const start = new Date(startDate);\n//     const end = new Date(endDate);\n//     const date = new Date(start.getTime());\n\n//     const dates = [];\n\n//     while (date <= end) {\n//       dates.push(new Date(date).getTime());\n//       date.setDate(date.getDate() + 1);\n//     }\n\n//     return dates;\n//   };\n\n//   const alldates = getDatesInRange(dates[0].startDate, dates[0].endDate);\n\n//   const isAvailable = (roomNumber) => {\n//     const isFound = roomNumber.unavailableDates.some((date) =>\n//       alldates.includes(new Date(date).getTime())\n//     );\n\n//     return !isFound;\n//   };\n\n//   const handleSelect = (e) => {\n//     const checked = e.target.checked;\n//     const value = e.target.value;\n//     setSelectedTables(\n//       checked\n//         ? [...selectedTables, value]\n//         : selectedTables.filter((item) => item !== value)\n//     );\n//   };\n// // console.log(selectedTables)\n//   const navigate = useNavigate();\n\n//   const handleClick = async () => {\n//     try {\n//       await Promise.all(\n//         selectedTables.map((tableId) => {\n//           const res = axios.put(`/tables/availability/${tableId}`, { dates: alldates });\n//           return res.data;\n//         })\n//       );\n//       setOpen(false);\n//       navigate(\"/\");\n//     } catch (err) {}\n//   };\n//   return (  <div className=\"reserve\">\n//   <div className=\"rContainer\">\n//     <FontAwesomeIcon\n//       icon={faCircleXmark}\n//       className=\"rClose\"\n//       onClick={() => setOpen(false)}\n//     />\n//         <span>Select your place</span>\n\n//     {data.map((item) => (\n//           <div className=\"rItem\" key={item._id}>\n//             <div className=\"rItemInfo\">\n//               <div className=\"rTitle\">{item.title}</div>\n//               <div className=\"rDesc\">{item.desc}</div>\n//               <div className=\"rMax\">\n//                 Max people: <b>{item.maxPeople}</b>\n//               </div>\n//               <div className=\"rPrice\">{item.price}</div>\n//             </div>\n//             <div className=\"rSelectRooms\">\n//               {item.tableNumbers.map((tableNumber) => (\n//                 <div className=\"room\">\n//                   <label>{tableNumber.number}</label>\n//                   <input\n//                     type=\"checkbox\"\n//                     value={tableNumber._id}\n//                     onChange={handleSelect}\n//                     disabled={!isAvailable(tableNumber)}\n//                   />\n//  </div>\n//               ))}\n//             </div>\n//           </div>\n//         ))}\n//         <button onClick={handleClick} className=\"rButton\">\n//           Reserve Now!\n//         </button>\n//       </div>\n//     </div>\n//   );\n// };\n\n// export default Reserve;","map":{"version":3,"names":[],"sources":["C:/Users/eyala/OneDrive/Desktop/iot-booking-elaco/client/src/components/reserve/Reserve.jsx"],"sourcesContent":["// import { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\n// import { faCircleXmark } from \"@fortawesome/free-solid-svg-icons\";\r\n// import \"./reserve.css\";\r\n// import useFetch from \"../../hooks/useFetch\";\r\n// import { useContext, useState } from \"react\";\r\n// import { SearchContext } from \"../../context/SearchContext\";\r\n// import axios from \"axios\";\r\n// import { useNavigate } from \"react-router-dom\";\r\n\r\n\r\n// const Reserve = ({ setOpen, spaceId }) => {\r\n//   const [selectedTables, setSelectedTables] = useState([]);\r\n//   const { data, loading, error } = useFetch(`/spaces/table/${spaceId}`);\r\n//   const { dates } = useContext(SearchContext);\r\n\r\n\r\n//   const getDatesInRange = (startDate, endDate) => {\r\n//     const start = new Date(startDate);\r\n//     const end = new Date(endDate);\r\n//     const date = new Date(start.getTime());\r\n\r\n//     const dates = [];\r\n\r\n//     while (date <= end) {\r\n//       dates.push(new Date(date).getTime());\r\n//       date.setDate(date.getDate() + 1);\r\n//     }\r\n\r\n//     return dates;\r\n//   };\r\n\r\n//   const alldates = getDatesInRange(dates[0].startDate, dates[0].endDate);\r\n\r\n//   const isAvailable = (roomNumber) => {\r\n//     const isFound = roomNumber.unavailableDates.some((date) =>\r\n//       alldates.includes(new Date(date).getTime())\r\n//     );\r\n\r\n//     return !isFound;\r\n//   };\r\n\r\n//   const handleSelect = (e) => {\r\n//     const checked = e.target.checked;\r\n//     const value = e.target.value;\r\n//     setSelectedTables(\r\n//       checked\r\n//         ? [...selectedTables, value]\r\n//         : selectedTables.filter((item) => item !== value)\r\n//     );\r\n//   };\r\n// // console.log(selectedTables)\r\n//   const navigate = useNavigate();\r\n\r\n//   const handleClick = async () => {\r\n//     try {\r\n//       await Promise.all(\r\n//         selectedTables.map((tableId) => {\r\n//           const res = axios.put(`/tables/availability/${tableId}`, { dates: alldates });\r\n//           return res.data;\r\n//         })\r\n//       );\r\n//       setOpen(false);\r\n//       navigate(\"/\");\r\n//     } catch (err) {}\r\n//   };\r\n//   return (  <div className=\"reserve\">\r\n//   <div className=\"rContainer\">\r\n//     <FontAwesomeIcon\r\n//       icon={faCircleXmark}\r\n//       className=\"rClose\"\r\n//       onClick={() => setOpen(false)}\r\n//     />\r\n//         <span>Select your place</span>\r\n \r\n//     {data.map((item) => (\r\n//           <div className=\"rItem\" key={item._id}>\r\n//             <div className=\"rItemInfo\">\r\n//               <div className=\"rTitle\">{item.title}</div>\r\n//               <div className=\"rDesc\">{item.desc}</div>\r\n//               <div className=\"rMax\">\r\n//                 Max people: <b>{item.maxPeople}</b>\r\n//               </div>\r\n//               <div className=\"rPrice\">{item.price}</div>\r\n//             </div>\r\n//             <div className=\"rSelectRooms\">\r\n//               {item.tableNumbers.map((tableNumber) => (\r\n//                 <div className=\"room\">\r\n//                   <label>{tableNumber.number}</label>\r\n//                   <input\r\n//                     type=\"checkbox\"\r\n//                     value={tableNumber._id}\r\n//                     onChange={handleSelect}\r\n//                     disabled={!isAvailable(tableNumber)}\r\n//                   />\r\n//  </div>\r\n//               ))}\r\n//             </div>\r\n//           </div>\r\n//         ))}\r\n//         <button onClick={handleClick} className=\"rButton\">\r\n//           Reserve Now!\r\n//         </button>\r\n//       </div>\r\n//     </div>\r\n//   );\r\n// };\r\n\r\n// export default Reserve;"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA;AACA;AACA;AACA;;AAGA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}